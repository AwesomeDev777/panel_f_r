(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2332],{90625:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/contract",function(){return n(85816)}])},74114:function(e,t,n){"use strict";var r=n(35666),i=n.n(r),o=n(62286),c=n.n(o),a=n(28367),u=n(6154);function s(e,t,n,r,i,o,c){try{var a=e[o](c),u=a.value}catch(s){return void n(s)}a.done?t(u):Promise.resolve(u).then(r,i)}var l,d=(l=i().mark((function e(t){var n,r,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=c().get(t),void 0!==(r={Authorization:n.admintoken}).Authorization){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,(0,u.Z)({url:a.v3,method:"GET",headers:r});case 8:if((o=e.sent).data&&"Unauthorized"!=o.data){e.next=11;break}return e.abrupt("return",!1);case 11:return e.abrupt("return",o.data);case 12:case"end":return e.stop()}}),e)})),function(){var e=this,t=arguments;return new Promise((function(n,r){var i=l.apply(e,t);function o(e){s(i,n,r,o,c,"next",e)}function c(e){s(i,n,r,o,c,"throw",e)}o(void 0)}))});t.Z=d},55886:function(e,t,n){"use strict";var r=n(35666),i=n.n(r),o=n(85893),c=(n(67294),n(11163)),a=n(74114),u=n(85004);function s(e,t,n,r,i,o,c){try{var a=e[o](c),u=a.value}catch(s){return void n(s)}a.done?t(u):Promise.resolve(u).then(r,i)}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){l(e,t,n[t])}))}return e}t.Z=function(e){var t,n=function(t){return(0,o.jsx)(e,d({},t))};return n.getInitialProps=(t=i().mark((function t(n){var r,o;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.getInitialProps){t.next=6;break}return t.next=3,e.getInitialProps(n);case 3:t.t0=t.sent,t.next=7;break;case 6:t.t0={};case 7:return r=t.t0,t.next=10,(0,a.Z)(n);case 10:if(o=t.sent){t.next=14;break}return n.res?(n.res.writeHead(302,{Location:u.Z.AdminloginPagePath}),n.res.end()):c.default.push(u.Z.AdminloginPagePath),t.abrupt("return",d({},r,{userData:null}));case 14:return t.abrupt("return",d({},r,{userData:o}));case 15:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function c(e){s(o,r,i,c,a,"next",e)}function a(e){s(o,r,i,c,a,"throw",e)}c(void 0)}))}),Object.assign(n,e)}},16862:function(e,t,n){"use strict";n.d(t,{M:function(){return a},A:function(){return u}});var r=n(78764),i=n.n(r),o=n(77630),c=n.n(o),a=c()(i().mixin({customClass:{confirmButton:"btn btn-label-success btn-wide mx-1",cancelButton:"btn btn-label-danger btn-wide mx-1"},buttonsStyling:!1})),u=c()(i().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0}))},85816:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return v}});var r=n(85893),i=n(67294),o=n(59417),c=n(6154),a=n(16862),u=n(11163),s=n(60716),l=n(28367),d=n(62286);function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var c,a=e[Symbol.iterator]();!(r=(c=a.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(u){i=!0,o=u}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var p=n(44364),x=function(){var e=(0,o.Fg)().resolvedTheme,t=(0,u.useRouter)(),n={Authorization:(0,d.parseCookies)().admintoken},x=h(i.useState(10),2),j=x[0],m=x[1],v=h(i.useState([]),2),b=v[0],g=v[1],y=h(i.useState(1),2),k=y[0],w=y[1],O=h(i.useState(10),2),P=O[0],S=O[1],_=h(i.useState(),2),C=_[0],E=_[1],A=h(i.useState(.001),2),X=A[0],N=A[1],T=h(i.useState([""]),2),z=T[0],L=T[1],Z=h(i.useState([""]),2),B=Z[0],I=Z[1],J=h(i.useState([0]),2),D=J[0],M=J[1],V=h(i.useState([0]),2),F=V[0],H=V[1],Y=h(i.useState(0),2),R=Y[0],q=Y[1];i.useEffect((function(){c.Z.get(l.aE+"/".concat(k,"/").concat(j),{headers:n}).then((function(e){g(e.data.all),0==j||0==e.data.length?S(1):S(Math.ceil(e.data.length/j))})).catch((function(e){return console.log(e)}))}),[j,k,X]),i.useEffect((function(){c.Z.get(l.IY+"/1/0",{headers:n}).then((function(e){for(var t=[],n=[],r=[],i=[],o=0;o<e.data.all.length;o++)t.push(e.data.all[o]._id),n.push(e.data.all[o].name),i[o]=0,r[o]=0;I(t),L(n),M(r),H(i),q(1)})).catch((function(e){return console.log(e)}))}),[]),i.useEffect((function(){p(C)||c.Z.delete(l.hL+"/".concat(C),{headers:n}).then((function(e){N(Math.random())})).catch((function(e){return console.log(e)}))}),[C]);var G={activeLinkNumber:k,paginationLength:P,chooseActiveLinkNumber:function(e){w(e)}},U=function(e){return(0,r.jsx)(o.zx,{variant:"text-danger",onClick:function(){a.M.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((function(t){t.isConfirmed&&(E(e.id),a.M.fire("Deleted!","That Contract has been deleted.","success"))}))},pill:!0,size:"sm",children:"delete"})},K=function(e){return String(e).slice(0,9)};i.useEffect((function(){if(0!=B.length)for(var e=function(e){b.map((function(t){null!==t.contract_type&&B[e]==t.contract_type._id&&(D[e]+=t.contract_value,F[e]+=1)}))},t=0;t<B.length;t++)e(t);else M([])}),[b.length,R]);var Q=function(e){return void 0!==e?e.name:""},W=function(e){return null!==e?e.name:""},$=function(e){var t=h(i.useState({theme:{mode:e.mode,palette:"palette1"},chart:{background:"transparent"},plotOptions:{bar:{horizontal:!0}},dataLabels:{enabled:!1},xaxis:{categories:[]}}),2),n=(t[0],t[1]);return i.useEffect((function(){n((function(t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){f(e,t,n[t])}))}return e}({},t,{mode:e.mode,xaxis:{categories:z},palette:"palette1"})}))}),[e.mode]),(0,r.jsx)("div",{})};return(0,r.jsxs)(o.kr,{children:[(0,r.jsxs)(o.kr.Body,{className:"pb-0",children:[(0,r.jsxs)(o.X2,{children:[(0,r.jsx)(o.JX,{md:2,children:(0,r.jsx)(o.zx,{variant:"primary",onClick:function(){return t.push("/admin/contract/new")},children:" New Contract "})}),(0,r.jsx)(o.JX,{md:1,children:(0,r.jsxs)(o.l0.Select,{id:"size_id",onChange:function(e){return m(parseInt(e.target.value))},defaultValue:"10",size:"lg",children:[(0,r.jsx)("option",{value:"10",children:"10"}),(0,r.jsx)("option",{value:"25",children:"25"}),(0,r.jsx)("option",{value:"50",children:"50"}),(0,r.jsx)("option",{value:"100",children:"100"}),(0,r.jsx)("option",{value:"0",children:"All"})]})}),(0,r.jsx)(o.JX,{md:7}),(0,r.jsx)(o.JX,{md:2})]}),(0,r.jsxs)(o.X2,{children:[(0,r.jsx)(o.JX,{children:(0,r.jsxs)(o.kr,{children:[(0,r.jsx)(o.kr.Header,{bordered:!0,children:(0,r.jsx)(o.kr.Title,{children:"Contracts by Type"})}),(0,r.jsx)(o.kr.Body,{children:(0,r.jsx)($,{mode:e,series:[{data:F}]})})]})}),(0,r.jsx)(o.JX,{children:(0,r.jsxs)(o.kr,{children:[(0,r.jsx)(o.kr.Header,{bordered:!0,children:(0,r.jsx)(o.kr.Title,{children:"Contracts Value by Type"})}),(0,r.jsx)(o.kr.Body,{children:(0,r.jsx)($,{mode:e,series:[{data:D}]})})]})})]}),(0,r.jsx)(o.X2,{children:(0,r.jsx)(o.JX,{md:12,children:(0,r.jsx)("p",{})})}),(0,r.jsxs)(o.iA,{responsive:!0,striped:!0,hover:!0,children:[(0,r.jsx)("thead",{className:"table-primary",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{scope:"col",children:"Subject"}),(0,r.jsx)("th",{scope:"col",children:"Client"}),(0,r.jsx)("th",{scope:"col",children:"Type"}),(0,r.jsx)("th",{scope:"col",children:"Value"}),(0,r.jsx)("th",{scope:"col",children:"Start Date"}),(0,r.jsx)("th",{scope:"col",children:"End Date"}),(0,r.jsx)("th",{scope:"col",children:"Project"}),(0,r.jsx)("th",{scope:"col",children:"Signature"}),(0,r.jsx)("th",{scope:"col",children:"Action"})]})}),(0,r.jsx)("tbody",{children:b.map((function(e){return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:e.subject}),(0,r.jsx)("td",{children:(n=e.client,null!==n?n.company:"")}),(0,r.jsx)("td",{children:W(e.contract_type)}),(0,r.jsx)("td",{children:e.contract_value}),(0,r.jsx)("td",{children:K(e.datestart)}),(0,r.jsx)("td",{children:K(e.dateend)}),(0,r.jsx)("td",{children:Q(e.project)}),(0,r.jsx)("td",{children:e.signature}),(0,r.jsxs)("td",{children:[(0,r.jsx)(o.zx,{variant:"text-primary",onClick:function(){return t.push({pathname:"/admin/contract/[id]",query:{id:e._id}})},pill:!0,size:"sm",children:"view / Edit"}),(0,r.jsx)(U,{id:e._id})]})]},e._id);var n}))})]})]}),(0,r.jsx)(o.kr.Footer,{children:(0,r.jsxs)(o.X2,{children:[(0,r.jsx)(o.JX,{md:9}),(0,r.jsx)(o.JX,{md:3,children:(0,r.jsx)(s.Z,{pagination:G})})]})})]})},j=n(55886),m=function(){return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(o.X2,{children:(0,r.jsx)(o.JX,{md:12,children:(0,r.jsx)(x,{})})})})};m.pageTitle="Contract",m.activeLink="admin/contract";var v=(0,j.Z)(m)},60716:function(e,t,n){"use strict";var r=n(85893),i=n(59417),o=n(67294);function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var c,a=e[Symbol.iterator]();!(r=(c=a.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(u){i=!0,o=u}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}t.Z=function(e){var t=a(o.useState(e.pagination.activeLinkNumber),2),n=t[0],u=t[1],s=e.pagination.paginationLength,l=[];return n>s&&u(s),n<1&&u(1),l=s<=7?Array.from({length:s},(function(e,t){return t+1})):n<=4?Array.from({length:7},(function(e,t){return t+1})):s-n>3?Array.from({length:7},(function(e,t){return n+t-3})):Array.from({length:7},(function(e,t){return s+t-6})),o.useEffect((function(){e.pagination.chooseActiveLinkNumber(n)}),[n]),o.useEffect((function(){u(e.pagination.activeLinkNumber)}),[e.pagination.activeLinkNumber]),(0,r.jsxs)(i.tl,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){c(e,t,n[t])}))}return e}({},e,{children:[(0,r.jsx)(i.tl.Item,{onClick:function(){return u(n-1)},children:"PREV"}),l.map((function(e){return(0,r.jsx)(i.tl.Item,{active:e===n,onClick:function(){u(e)},children:e},e)})),(0,r.jsx)(i.tl.Item,{onClick:function(){return u(n+1)},children:"Next"})]}))}}},function(e){e.O(0,[1039,9774,2888,179],(function(){return t=90625,e(e.s=t);var t}));var t=e.O();_N_E=t}]);