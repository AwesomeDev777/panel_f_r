(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1660],{66252:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/project/new",function(){return n(37647)}])},16862:function(e,t,n){"use strict";n.d(t,{M:function(){return l},A:function(){return o}});var r=n(78764),s=n.n(r),a=n(77630),i=n.n(a),l=i()(s().mixin({customClass:{confirmButton:"btn btn-label-success btn-wide mx-1",cancelButton:"btn btn-label-danger btn-wide mx-1"},buttonsStyling:!1})),o=i()(s().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0}))},37647:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return g}});var r=n(85893),s=n(67294),a=n(59417),i=n(35666),l=n.n(i),o=n(6519),c=n(6154),d=n(16862),u=n(62286),h=n(28367);function j(e,t,n,r,s,a,i){try{var l=e[a](i),o=l.value}catch(c){return void n(c)}l.done?t(o):Promise.resolve(o).then(r,s)}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,s=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(o){s=!0,a=o}finally{try{r||null==l.return||l.return()}finally{if(s)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var p=n(44364),f=function(){var e={Authorization:(0,u.parseCookies)().admintoken},t=x(s.useState({}),2),n=t[0],i=t[1],f=x(s.useState({name:"",status:"",billing_type:"",start_date:""}),2),v=f[0],g=f[1],m={color:"red"},y=x(s.useState(""),2),b=y[0],_=y[1],S=x(s.useState(""),2),C=S[0],I=S[1],w=x(s.useState(""),2),k=w[0],P=w[1],X=x(s.useState(""),2),J=X[0],L=X[1],N=x(s.useState(1),2),D=N[0],E=N[1],z=x(s.useState(0),2),B=z[0],H=z[1],K=x(s.useState([""]),2),A=K[0],G=K[1],O=x(s.useState(),2),T=O[0],F=O[1],Z=x(s.useState(),2),R=Z[0],q=Z[1],M=x(s.useState(""),2),U=M[0],Q=M[1],V=x(s.useState([]),2),W=V[0],Y=V[1],$=x(s.useState([]),2),ee=$[0],te=$[1];s.useEffect((function(){c.Z.get(h.U5,{headers:e}).then((function(e){for(var t=[],n=0;n<e.data.data.length;n++)t.push({value:e.data.data[n]._id,label:e.data.data[n].company});Y(t),I(e.data.data[0]._id)})).catch((function(e){return console.log(e)}))}),[]),s.useEffect((function(){c.Z.get(h.hP+"/1/0/search:/sort:1",{headers:e}).then((function(e){for(var t=[],n=0;n<e.data.all.length;n++)t.push({value:e.data.all[n]._id,label:e.data.all[n].firstname});te(t)})).catch((function(e){return console.log(e)}))}),[]),s.useEffect((function(){i({name:b,client:C,start_date:T,deadline:R,billing_type:k,status:J,project_cost:D,estimated_hours:B,staffs:A,description:U})}),[b,C,T,R,k,J,D,B,A.length,U]);var ne,re=(ne=l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.Z.post(h.RB,n,{headers:e}).then((function(e){d.A.fire({icon:"success",title:"Success!"}),g({name:"",status:"",billing_type:"",start_date:""})})).catch((function(e){var t={name:"",status:"",billing_type:"",start_date:""};!p(e.response.data.name)&&(t.name=e.response.data.name),!p(e.response.data.status)&&(t.status=e.response.data.status),!p(e.response.data.billing_type)&&(t.billing_type=e.response.data.billing_type),!p(e.response.data.start_date)&&(t.start_date=e.response.data.start_date),g(t)}));case 2:case"end":return t.stop()}}),t)})),function(){var e=this,t=arguments;return new Promise((function(n,r){var s=ne.apply(e,t);function a(e){j(s,n,r,a,i,"next",e)}function i(e){j(s,n,r,a,i,"throw",e)}a(void 0)}))});return(0,r.jsxs)(a.X2,{children:[(0,r.jsx)(a.JX,{md:"2"}),(0,r.jsx)(a.JX,{md:"8",children:(0,r.jsx)(a.OK.Container,{defaultActiveKey:"project",children:(0,r.jsxs)(a.kr,{children:[(0,r.jsxs)(a.kr.Header,{bordered:!0,children:[(0,r.jsx)(a.kr.Addon,{children:(0,r.jsx)(a.JL,{variant:"lines",portlet:!0,children:(0,r.jsx)(a.JL.Item,{children:(0,r.jsx)(a.JL.Link,{eventKey:"project",children:"* Project"})})})}),(0,r.jsx)(a.kr.Addon,{children:(0,r.jsx)(a.JL,{variant:"lines",portlet:!0,children:(0,r.jsx)(a.JL.Item,{children:(0,r.jsx)(a.JL.Link,{eventKey:"projectsetting",children:"* Project Settings"})})})})]}),(0,r.jsx)(a.kr.Body,{children:(0,r.jsxs)(a.OK.Content,{children:[(0,r.jsx)(a.OK.Pane,{eventKey:"project",children:(0,r.jsx)(a.kr,{children:(0,r.jsx)(a.kr.Body,{children:(0,r.jsxs)(a.X2,{children:[(0,r.jsx)(a.JX,{md:"2"}),(0,r.jsx)(a.JX,{md:"8",children:(0,r.jsxs)("div",{className:"d-grid gap-3",children:[(0,r.jsxs)(a.l0.Group,{controlId:"nameID",children:[(0,r.jsx)(a.l0.Label,{children:"*Project Name"}),(0,r.jsx)(a.l0.Control,{onChange:function(e){return _(e.target.value)},type:"text",size:"lg"}),(0,r.jsx)("p",{style:m,children:v.name})]}),(0,r.jsx)("div",{className:"dropdown-container",children:(0,r.jsx)(o.ZP,{options:W,placeholder:"Select Client",onChange:function(e){I(e.value)},isSearchable:!0,instanceId:"unique-client-id"})}),(0,r.jsxs)(a.l0.Group,{controlId:"billingtypeID",children:[(0,r.jsx)(a.l0.Label,{children:"*Billing type"}),(0,r.jsxs)(a.l0.Select,{onChange:function(e){return P(e.target.value)},size:"lg",children:[(0,r.jsx)("option",{value:"Fixed Rate",children:"Fixed Rate"}),(0,r.jsx)("option",{value:"Project Hours",children:"Project Hours"}),(0,r.jsx)("option",{value:"Task Hours",children:"Task Hours"})]}),(0,r.jsx)("p",{style:m,children:v.billing_type})]}),(0,r.jsxs)(a.l0.Group,{controlId:"statusID",children:[(0,r.jsx)(a.l0.Label,{children:"*Status"}),(0,r.jsxs)(a.l0.Select,{onChange:function(e){return L(e.target.value)},size:"lg",children:[(0,r.jsx)("option",{value:"Not Started",children:"Not Started"}),(0,r.jsx)("option",{value:"In Progress",children:"In Progress"}),(0,r.jsx)("option",{value:"On Hold",children:"On Hold"}),(0,r.jsx)("option",{value:"Cancelled",children:"Cancelled"}),(0,r.jsx)("option",{value:"Finished",children:"Finished"})]}),(0,r.jsx)("p",{style:m,children:v.status})]}),(0,r.jsxs)(a.X2,{children:[(0,r.jsx)(a.JX,{children:(0,r.jsxs)(a.l0.Group,{controlId:"totalrateID",children:[(0,r.jsx)(a.l0.Label,{children:"*Total Rate"}),(0,r.jsx)(a.l0.Control,{onChange:function(e){return E(parseInt(e.target.value))},type:"Number",size:"lg"})]})}),(0,r.jsx)(a.JX,{children:(0,r.jsxs)(a.l0.Group,{controlId:"estimatedhoursID",children:[(0,r.jsx)(a.l0.Label,{children:"*Estimated Hours"}),(0,r.jsx)(a.l0.Control,{onChange:function(e){return H(parseInt(e.target.value))},type:"Number",size:"lg"})]})})]}),(0,r.jsxs)(a.X2,{children:[(0,r.jsxs)(a.JX,{children:[(0,r.jsxs)(a.l0.Group,{controlId:"startdateID",children:[(0,r.jsx)(a.l0.Label,{children:"*Start Date"}),(0,r.jsx)(a.l0.Control,{onChange:function(e){return F(new Date(e.target.value))},type:"date",size:"lg"})]}),(0,r.jsx)("p",{style:m,children:v.start_date})]}),(0,r.jsx)(a.JX,{children:(0,r.jsxs)(a.l0.Group,{controlId:"deadlineID",children:[(0,r.jsx)(a.l0.Label,{children:"*Deadline"}),(0,r.jsx)(a.l0.Control,{onChange:function(e){return q(new Date(e.target.value))},type:"date",size:"lg"})]})})]}),(0,r.jsx)("div",{className:"dropdown-container",children:(0,r.jsx)(o.ZP,{options:ee,placeholder:"Select Staff",onChange:function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].value);G(t)},isSearchable:!0,instanceId:"unique-staff-id",isMulti:!0})}),(0,r.jsxs)(a.l0.Group,{controlId:"descriptionID",children:[(0,r.jsx)(a.l0.Label,{children:"*Description"}),(0,r.jsx)(a.l0.Control,{onChange:function(e){return Q(e.target.value)},as:"textarea",rows:3})]})]})}),(0,r.jsx)(a.JX,{md:"2"})]})})})}),(0,r.jsx)(a.OK.Pane,{eventKey:"projectsetting",children:(0,r.jsx)(a.kr,{children:(0,r.jsx)(a.kr.Body,{children:(0,r.jsx)("p",{children:"Have not yet"})})})})]})}),(0,r.jsx)(a.kr.Footer,{bordered:!0,align:"end",children:(0,r.jsx)(a.zx,{onClick:re,type:"submit",variant:"primary",children:"Submit"})})]})})}),(0,r.jsx)(a.JX,{md:"2"})]})},v=function(){return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(a.X2,{children:(0,r.jsx)(a.JX,{md:12,children:(0,r.jsx)(f,{})})})})};v.pageTitle="New Project",v.activeLink="admin/project/new";var g=v}},function(e){e.O(0,[1039,6519,9774,2888,179],(function(){return t=66252,e(e.s=t);var t}));var t=e.O();_N_E=t}]);