(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1780],{18347:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/project/[id]",function(){return n(28782)}])},16862:function(e,t,n){"use strict";n.d(t,{M:function(){return l},A:function(){return o}});var r=n(78764),a=n.n(r),s=n(77630),i=n.n(s),l=i()(a().mixin({customClass:{confirmButton:"btn btn-label-success btn-wide mx-1",cancelButton:"btn btn-label-danger btn-wide mx-1"},buttonsStyling:!1})),o=i()(a().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0}))},28782:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return y}});var r=n(85893),a=n(67294),s=n(59417),i=n(35666),l=n.n(i),o=n(6519),c=n(6154),d=n(16862),u=n(62286),h=n(28367);function j(e,t,n,r,a,s,i){try{var l=e[s](i),o=l.value}catch(c){return void n(c)}l.done?t(o):Promise.resolve(o).then(r,a)}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,s=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(o){a=!0,s=o}finally{try{r||null==l.return||l.return()}finally{if(a)throw s}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var p=n(44364),x=function(e){var t=e.id,n={Authorization:(0,u.parseCookies)().admintoken},i=f(a.useState({name:"",status:"",billing_type:"",start_date:""}),2),x=i[0],v=i[1],g=f(a.useState({}),2),m=g[0],y=g[1],b={color:"red"},_=f(a.useState(""),2),S=_[0],C=_[1],w=f(a.useState(""),2),I=w[0],k=w[1],P=f(a.useState(""),2),X=P[0],J=P[1],L=f(a.useState(""),2),D=L[0],E=L[1],N=f(a.useState(1),2),A=N[0],z=N[1],G=f(a.useState(0),2),H=G[0],K=G[1],B=f(a.useState([""]),2),O=B[0],T=B[1],F=f(a.useState(),2),Z=F[0],q=F[1],R=f(a.useState(),2),V=R[0],M=R[1],U=f(a.useState(""),2),Q=U[0],W=U[1],Y=f(a.useState(""),2),$=Y[0],ee=Y[1],te=f(a.useState([]),2),ne=te[0],re=te[1],ae=f(a.useState([]),2),se=ae[0],ie=ae[1],le=f(a.useState([""]),2),oe=le[0],ce=le[1];a.useEffect((function(){c.Z.get(h.jC+"/".concat(t),{headers:n}).then((function(e){C(e.data.name),k(e.data.client._id),ee(e.data.client.company),J(e.data.billing_type),E(e.data.status),z(e.data.project_cost),K(e.data.estimated_hours);for(var t=[],n=[],r=0;r<e.data.staffs.length;r++)t.push(e.data.staffs[r]._id),n.push(e.data.staffs[r].firstname);T(t),ce(n),q(e.data.start_date),M(e.data.deadline),W(e.data.description)})).catch((function(e){console.log(e)}))}),[]),a.useEffect((function(){c.Z.get(h.U5,{headers:n}).then((function(e){for(var t=[],n=0;n<e.data.data.length;n++)t.push({value:e.data.data[n]._id,label:e.data.data[n].company});re(t),k(e.data.data[0]._id)})).catch((function(e){return console.log(e)}))}),[]),a.useEffect((function(){c.Z.get(h.hP+"/1/0/search:/sort:1",{headers:n}).then((function(e){for(var t=[],n=0;n<e.data.all.length;n++)t.push({value:e.data.all[n]._id,label:e.data.all[n].firstname});ie(t)})).catch((function(e){return console.log(e)}))}),[]),a.useEffect((function(){y({name:S,client:I,start_date:Z,deadline:V,billing_type:X,status:D,project_cost:A,estimated_hours:H,staffs:O,description:Q})}),[S,I,Z,V,X,D,A,H,O.length,Q]);var de,ue=function(e){if(void 0!==e)return e.slice(0,10)},he=(de=l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Z.put(h.Gl+"/".concat(t),m,{headers:n}).then((function(e){d.A.fire({icon:"success",title:"Success!"})})).catch((function(e){var t={name:"",status:"",billing_type:"",start_date:""};!p(e.response.data.name)&&(t.name=e.response.data.name),!p(e.response.data.status)&&(t.status=e.response.data.status),!p(e.response.data.billing_type)&&(t.billing_type=e.response.data.billing_type),!p(e.response.data.start_date)&&(t.start_date=e.response.data.start_date),v(t)}));case 2:case"end":return e.stop()}}),e)})),function(){var e=this,t=arguments;return new Promise((function(n,r){var a=de.apply(e,t);function s(e){j(a,n,r,s,i,"next",e)}function i(e){j(a,n,r,s,i,"throw",e)}s(void 0)}))}),je=function(){var e=oe.join(", ");return(0,r.jsxs)("p",{children:["Staffs: ",e]})};return(0,r.jsxs)(s.X2,{children:[(0,r.jsx)(s.JX,{md:"2"}),(0,r.jsx)(s.JX,{md:"8",children:(0,r.jsx)(s.OK.Container,{defaultActiveKey:"project",children:(0,r.jsxs)(s.kr,{children:[(0,r.jsxs)(s.kr.Header,{bordered:!0,children:[(0,r.jsx)(s.kr.Addon,{children:(0,r.jsx)(s.JL,{variant:"lines",portlet:!0,children:(0,r.jsx)(s.JL.Item,{children:(0,r.jsx)(s.JL.Link,{eventKey:"project",children:"* Project"})})})}),(0,r.jsx)(s.kr.Addon,{children:(0,r.jsx)(s.JL,{variant:"lines",portlet:!0,children:(0,r.jsx)(s.JL.Item,{children:(0,r.jsx)(s.JL.Link,{eventKey:"projectsetting",children:"* Project Settings"})})})})]}),(0,r.jsx)(s.kr.Body,{children:(0,r.jsxs)(s.OK.Content,{children:[(0,r.jsx)(s.OK.Pane,{eventKey:"project",children:(0,r.jsx)(s.kr,{children:(0,r.jsx)(s.kr.Body,{children:(0,r.jsxs)(s.X2,{children:[(0,r.jsx)(s.JX,{md:"2"}),(0,r.jsx)(s.JX,{md:"8",children:(0,r.jsxs)("div",{className:"d-grid gap-3",children:[(0,r.jsxs)(s.l0.Group,{controlId:"nameID",children:[(0,r.jsx)(s.l0.Label,{children:"*Project Name"}),(0,r.jsx)(s.l0.Control,{onChange:function(e){return C(e.target.value)},defaultValue:S,type:"text",size:"lg"}),(0,r.jsx)("p",{style:b,children:x.name})]}),(0,r.jsxs)("div",{className:"dropdown-container",children:[(0,r.jsxs)("p",{children:["Client : ",$]}),(0,r.jsx)(o.ZP,{options:ne,placeholder:"Select Client",onChange:function(e){k(e.value)},isSearchable:!0,instanceId:"unique-client-id"})]}),(0,r.jsxs)(s.l0.Group,{controlId:"billingtypeID",children:[(0,r.jsxs)(s.l0.Label,{children:["*Billing type : ",X]}),(0,r.jsxs)(s.l0.Select,{onChange:function(e){return J(e.target.value)},size:"lg",children:[(0,r.jsx)("option",{value:"Fixed Rate",children:"Fixed Rate"}),(0,r.jsx)("option",{value:"Project Hours",children:"Project Hours"}),(0,r.jsx)("option",{value:"Task Hours",children:"Task Hours"})]}),(0,r.jsx)("p",{style:b,children:x.billing_type})]}),(0,r.jsxs)(s.l0.Group,{controlId:"statusID",children:[(0,r.jsxs)(s.l0.Label,{children:["*Status : ",D]}),(0,r.jsxs)(s.l0.Select,{onChange:function(e){return E(e.target.value)},size:"lg",children:[(0,r.jsx)("option",{value:"Not Started",children:"Not Started"}),(0,r.jsx)("option",{value:"In Progress",children:"In Progress"}),(0,r.jsx)("option",{value:"On Hold",children:"On Hold"}),(0,r.jsx)("option",{value:"Cancelled",children:"Cancelled"}),(0,r.jsx)("option",{value:"Finished",children:"Finished"})]}),(0,r.jsx)("p",{style:b,children:x.status})]}),(0,r.jsxs)(s.X2,{children:[(0,r.jsx)(s.JX,{children:(0,r.jsxs)(s.l0.Group,{controlId:"totalrateID",children:[(0,r.jsx)(s.l0.Label,{children:"*Total Rate"}),(0,r.jsx)(s.l0.Control,{onChange:function(e){return z(parseInt(e.target.value))},value:A,type:"Number",size:"lg"})]})}),(0,r.jsx)(s.JX,{children:(0,r.jsxs)(s.l0.Group,{controlId:"estimatedhoursID",children:[(0,r.jsx)(s.l0.Label,{children:"*Estimated Hours"}),(0,r.jsx)(s.l0.Control,{onChange:function(e){return K(parseInt(e.target.value))},value:H,type:"Number",size:"lg"})]})})]}),(0,r.jsxs)(s.X2,{children:[(0,r.jsxs)(s.JX,{children:[(0,r.jsxs)(s.l0.Group,{controlId:"startdateID",children:[(0,r.jsxs)(s.l0.Label,{children:["*Start Date : ",ue(Z)]}),(0,r.jsx)(s.l0.Control,{onChange:function(e){return q(new Date(e.target.value))},type:"date",size:"lg"})]}),(0,r.jsx)("p",{style:b,children:x.start_date})]}),(0,r.jsx)(s.JX,{children:(0,r.jsxs)(s.l0.Group,{controlId:"deadlineID",children:[(0,r.jsxs)(s.l0.Label,{children:["*Deadline : ",ue(V)]}),(0,r.jsx)(s.l0.Control,{onChange:function(e){return M(new Date(e.target.value))},type:"date",size:"lg"})]})})]}),(0,r.jsx)(je,{}),(0,r.jsx)("div",{className:"dropdown-container",children:(0,r.jsx)(o.ZP,{options:se,placeholder:"Select staff",onChange:function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].value);T(t)},isSearchable:!0,isMulti:!0})}),(0,r.jsxs)(s.l0.Group,{controlId:"descriptionID",children:[(0,r.jsx)(s.l0.Label,{children:"*Description"}),(0,r.jsx)(s.l0.Control,{onChange:function(e){return W(e.target.value)},defaultValue:Q,as:"textarea",rows:3})]})]})}),(0,r.jsx)(s.JX,{md:"2"})]})})})}),(0,r.jsx)(s.OK.Pane,{eventKey:"projectsetting",children:(0,r.jsx)(s.kr,{children:(0,r.jsx)(s.kr.Body,{children:(0,r.jsx)("p",{children:"Have not yet"})})})})]})}),(0,r.jsx)(s.kr.Footer,{bordered:!0,align:"end",children:(0,r.jsx)(s.zx,{onClick:he,type:"submit",variant:"primary",children:"Submit"})})]})})}),(0,r.jsx)(s.JX,{md:"2"})]})},v=n(11163);function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,s=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(o){a=!0,s=o}finally{try{r||null==l.return||l.return()}finally{if(a)throw s}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var m=function(){var e=(0,v.useRouter)(),t=g(a.useState(),2),n=t[0],i=t[1],l=function(){return void 0!==n?(0,r.jsx)(x,{id:e.query.id}):(0,r.jsx)("p",{})};return a.useEffect((function(){if(void 0!=e.query){var t=e.query.id;i(String(t))}}),[e.query]),(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(s.X2,{children:(0,r.jsx)(s.JX,{md:12,children:(0,r.jsx)(l,{})})})})};m.pageTitle="View Project",m.activeLink="admin/project/";var y=m}},function(e){e.O(0,[1039,6519,9774,2888,179],(function(){return t=18347,e(e.s=t);var t}));var t=e.O();_N_E=t}]);