(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6053],{9484:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/setting/staff",function(){return t(29462)}])},74114:function(n,e,t){"use strict";var r=t(35666),i=t.n(r),o=t(62286),a=t.n(o),c=t(28367),u=t(6154);function s(n,e,t,r,i,o,a){try{var c=n[o](a),u=c.value}catch(s){return void t(s)}c.done?e(u):Promise.resolve(u).then(r,i)}var l,f=(l=i().mark((function n(e){var t,r,o;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=a().get(e),void 0!==(r={Authorization:t.admintoken}).Authorization){n.next=6;break}return n.abrupt("return",!1);case 6:return n.next=8,(0,u.Z)({url:c.v3,method:"GET",headers:r});case 8:if((o=n.sent).data&&"Unauthorized"!=o.data){n.next=11;break}return n.abrupt("return",!1);case 11:return n.abrupt("return",o.data);case 12:case"end":return n.stop()}}),n)})),function(){var n=this,e=arguments;return new Promise((function(t,r){var i=l.apply(n,e);function o(n){s(i,t,r,o,a,"next",n)}function a(n){s(i,t,r,o,a,"throw",n)}o(void 0)}))});e.Z=f},55886:function(n,e,t){"use strict";var r=t(35666),i=t.n(r),o=t(85893),a=(t(67294),t(11163)),c=t(74114),u=t(85004);function s(n,e,t,r,i,o,a){try{var c=n[o](a),u=c.value}catch(s){return void t(s)}c.done?e(u):Promise.resolve(u).then(r,i)}function l(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function f(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})))),r.forEach((function(e){l(n,e,t[e])}))}return n}e.Z=function(n){var e,t=function(e){return(0,o.jsx)(n,f({},e))};return t.getInitialProps=(e=i().mark((function e(t){var r,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.getInitialProps){e.next=6;break}return e.next=3,n.getInitialProps(t);case 3:e.t0=e.sent,e.next=7;break;case 6:e.t0={};case 7:return r=e.t0,e.next=10,(0,c.Z)(t);case 10:if(o=e.sent){e.next=14;break}return t.res?(t.res.writeHead(302,{Location:u.Z.AdminloginPagePath}),t.res.end()):a.default.push(u.Z.AdminloginPagePath),e.abrupt("return",f({},r,{userData:null}));case 14:return e.abrupt("return",f({},r,{userData:o}));case 15:case"end":return e.stop()}}),e)})),function(){var n=this,t=arguments;return new Promise((function(r,i){var o=e.apply(n,t);function a(n){s(o,r,i,a,c,"next",n)}function c(n){s(o,r,i,a,c,"throw",n)}a(void 0)}))}),Object.assign(t,n)}},16862:function(n,e,t){"use strict";t.d(e,{M:function(){return c},A:function(){return u}});var r=t(78764),i=t.n(r),o=t(77630),a=t.n(o),c=a()(i().mixin({customClass:{confirmButton:"btn btn-label-success btn-wide mx-1",cancelButton:"btn btn-label-danger btn-wide mx-1"},buttonsStyling:!1})),u=a()(i().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0}))},29462:function(n,e,t){"use strict";t.r(e),t.d(e,{default:function(){return _}});var r=t(85893),i=t(67294),o=t(59417),a=t(35666),c=t.n(a),u=t(99603),s=t(6154),l=t(34288),f=t(74544),d=t(16862),h=t(11163),p=t(60716),x=t(28367),v=t(62286),m=t(25675);function j(n,e,t,r,i,o,a){try{var c=n[o](a),u=c.value}catch(s){return void t(s)}c.done?e(u):Promise.resolve(u).then(r,i)}function g(n){return function(){var e=this,t=arguments;return new Promise((function(r,i){var o=n.apply(e,t);function a(n){j(o,r,i,a,c,"next",n)}function c(n){j(o,r,i,a,c,"throw",n)}a(void 0)}))}}function b(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var t=[],r=!0,i=!1,o=void 0;try{for(var a,c=n[Symbol.iterator]();!(r=(a=c.next()).done)&&(t.push(a.value),!e||t.length!==e);r=!0);}catch(u){i=!0,o=u}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}return t}(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var y=t(44364),w=function(){var n=(0,h.useRouter)(),e={Authorization:(0,v.parseCookies)().admintoken},t=b(i.useState(10),2),a=t[0],j=t[1],w=b(i.useState([]),2),k=w[0],P=w[1],_=b(i.useState(""),2),S=_[0],A=_[1],C=b(i.useState(1),2),O=C[0],E=C[1],N=b(i.useState(10),2),X=N[0],L=N[1],z=b(i.useState(),2),Z=z[0],I=z[1],B=b(i.useState(.001),2),T=B[0],J=B[1],D=b(i.useState(1),2),M=D[0],F=D[1];i.useEffect((function(){s.Z.get(x.hP+"/".concat(O,"/").concat(a,"/search:").concat(S,"/sort:").concat(M),{headers:e}).then((function(n){P(n.data.all),0==a||0==n.data.length?L(1):L(Math.ceil(n.data.length/a))})).catch((function(n){return console.log(n)}))}),[a,S,O,M,T]),i.useEffect((function(){y(Z)||s.Z.delete(x.BM+"/".concat(Z),{headers:e}).then((function(n){J(Math.random())})).catch((function(n){return console.log(n)}))}),[Z]);var G={activeLinkNumber:O,paginationLength:X,chooseActiveLinkNumber:function(n){E(n)}},R=function(n){return(0,r.jsx)(o.zx,{variant:"text-danger",onClick:function(){d.M.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(g(c().mark((function e(t){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isConfirmed){e.next=9;break}if(void 0===n.id[1]){e.next=7;break}return(r=new FormData).append("text",n.id[1]),e.next=6,fetch("/api/upload/remove",{method:"POST",body:r});case 6:e.sent;case 7:I(n.id[0]),d.M.fire("Deleted!","That staff has been deleted.","success");case 9:case"end":return e.stop()}}),e)}))))},pill:!0,size:"sm",children:"delete"})},q=g(c().mark((function n(t,r){var i;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i={active:t.target.checked},n.next=3,s.Z.put(x.mh+"/".concat(r),i,{headers:e}).then((function(n){d.A.fire({icon:"success",title:"Success!"})})).catch((function(n){console.log(n)}));case 3:case"end":return n.stop()}}),n)}))),V=function(n){var e="/uploads/profile_images/"+n;return void 0===n||y(n)?(0,r.jsx)(u.G,{icon:l.ILF}):(0,r.jsx)("div",{style:{position:"relative",width:"35px",height:"35px"},children:(0,r.jsx)(m.default,{src:e,layout:"fill",alt:"Avatar image"})})},Y=function(n){return 1==n.icon?(0,r.jsx)(u.G,{icon:f.onQ}):(0,r.jsx)(u.G,{icon:f.gc2})};return(0,r.jsxs)(o.kr,{children:[(0,r.jsxs)(o.kr.Body,{className:"pb-0",children:[(0,r.jsxs)(o.X2,{children:[(0,r.jsx)(o.JX,{md:2,children:(0,r.jsx)(o.zx,{variant:"primary",onClick:function(){return n.push("/admin/setting/staff/new")},children:" New Staff "})}),(0,r.jsx)(o.JX,{md:1,children:(0,r.jsxs)(o.l0.Select,{id:"size_id",onChange:function(n){return j(parseInt(n.target.value))},defaultValue:"10",size:"lg",children:[(0,r.jsx)("option",{value:"10",children:"10"}),(0,r.jsx)("option",{value:"25",children:"25"}),(0,r.jsx)("option",{value:"50",children:"50"}),(0,r.jsx)("option",{value:"100",children:"100"}),(0,r.jsx)("option",{value:"0",children:"All"})]})}),(0,r.jsx)(o.JX,{md:7}),(0,r.jsx)(o.JX,{md:2,children:(0,r.jsx)(o._b,{controlId:"search_id",label:"Search",children:(0,r.jsx)(o.l0.Control,{type:"text",onChange:function(n){return A(n.target.value)},placeholder:"name",size:"lg"})})})]}),(0,r.jsx)(o.X2,{children:(0,r.jsx)(o.JX,{md:12,children:(0,r.jsx)("p",{})})}),(0,r.jsxs)(o.iA,{responsive:!0,striped:!0,hover:!0,children:[(0,r.jsx)("thead",{className:"table-primary",children:(0,r.jsxs)("tr",{children:[(0,r.jsxs)("th",{scope:"col",onClick:function(){F(-1==M?1:-1)},children:["Full Name ",(0,r.jsx)(Y,{icon:M})]}),(0,r.jsx)("th",{scope:"col",children:"Email"}),(0,r.jsx)("th",{scope:"col",children:"Role"}),(0,r.jsx)("th",{scope:"col",children:"Last Login"}),(0,r.jsx)("th",{scope:"col",children:"Active"})]})}),(0,r.jsx)("tbody",{children:k.map((function(e){return(0,r.jsxs)("tr",{children:[(0,r.jsxs)("td",{children:[(0,r.jsx)(o.qE,{display:!0,children:V(e.profile_image)}),e.firstname,(0,r.jsxs)("div",{children:[(0,r.jsx)(o.zx,{variant:"text-primary",onClick:function(){return n.push({pathname:"/admin/setting/staff/[id]",query:{id:e._id}})},pill:!0,size:"sm",children:"view"}),(0,r.jsx)(R,{id:[e._id,e.profile_image]})]})]}),(0,r.jsx)("td",{children:e.email}),(0,r.jsx)("td",{children:e.role.name}),(0,r.jsx)("td",{children:e.last_login}),(0,r.jsx)("td",{children:(0,r.jsx)(o.l0.Switch,{id:e._id,onChange:function(n){return q(n,e._id)},defaultChecked:e.active})})]},e._id)}))})]})]}),(0,r.jsx)(o.kr.Footer,{children:(0,r.jsxs)(o.X2,{children:[(0,r.jsx)(o.JX,{md:9}),(0,r.jsx)(o.JX,{md:3,children:(0,r.jsx)(p.Z,{pagination:G})})]})})]})},k=t(55886),P=function(){return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(o.X2,{children:(0,r.jsx)(o.JX,{md:12,children:(0,r.jsx)(w,{})})})})};P.pageTitle="Staff",P.activeLink="admin/setting/staff";var _=(0,k.Z)(P)},60716:function(n,e,t){"use strict";var r=t(85893),i=t(59417),o=t(67294);function a(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function c(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var t=[],r=!0,i=!1,o=void 0;try{for(var a,c=n[Symbol.iterator]();!(r=(a=c.next()).done)&&(t.push(a.value),!e||t.length!==e);r=!0);}catch(u){i=!0,o=u}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}return t}(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}e.Z=function(n){var e=c(o.useState(n.pagination.activeLinkNumber),2),t=e[0],u=e[1],s=n.pagination.paginationLength,l=[];return t>s&&u(s),t<1&&u(1),l=s<=7?Array.from({length:s},(function(n,e){return e+1})):t<=4?Array.from({length:7},(function(n,e){return e+1})):s-t>3?Array.from({length:7},(function(n,e){return t+e-3})):Array.from({length:7},(function(n,e){return s+e-6})),o.useEffect((function(){n.pagination.chooseActiveLinkNumber(t)}),[t]),o.useEffect((function(){u(n.pagination.activeLinkNumber)}),[n.pagination.activeLinkNumber]),(0,r.jsxs)(i.tl,function(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})))),r.forEach((function(e){a(n,e,t[e])}))}return n}({},n,{children:[(0,r.jsx)(i.tl.Item,{onClick:function(){return u(t-1)},children:"PREV"}),l.map((function(n){return(0,r.jsx)(i.tl.Item,{active:n===t,onClick:function(){u(n)},children:n},n)})),(0,r.jsx)(i.tl.Item,{onClick:function(){return u(t+1)},children:"Next"})]}))}}},function(n){n.O(0,[1039,9774,2888,179],(function(){return e=9484,n(n.s=e);var e}));var e=n.O();_N_E=e}]);