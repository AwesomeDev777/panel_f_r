(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5205],{87873:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/setting/staff/[id]",function(){return n(81840)}])},16862:function(e,t,n){"use strict";n.d(t,{M:function(){return i},A:function(){return l}});var r=n(78764),a=n.n(r),o=n(77630),s=n.n(o),i=s()(a().mixin({customClass:{confirmButton:"btn btn-label-success btn-wide mx-1",cancelButton:"btn btn-label-danger btn-wide mx-1"},buttonsStyling:!1})),l=s()(a().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0}))},81840:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return w}});var r=n(85893),a=n(67294),o=n(59417),s=n(35666),i=n.n(s),l=n(6154),u=n(16862),c=n(62286),d=n(12590),f=n(25675),p=n(28367);function h(e,t,n,r,a,o,s){try{var i=e[o](s),l=i.value}catch(u){return void n(u)}i.done?t(l):Promise.resolve(l).then(r,a)}function m(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function s(e){h(o,r,a,s,i,"next",e)}function i(e){h(o,r,a,s,i,"throw",e)}s(void 0)}))}}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var s,i=e[Symbol.iterator]();!(r=(s=i.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(l){a=!0,o=l}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var g=n(44364),v=function(e){var t={Authorization:(0,c.parseCookies)().admintoken},n=e.id,s=x(a.useState({department:"",image:"",staff:"",role:"",email:"",password:"",firstname:"",lastname:""}),2),h=s[0],v=s[1],j=x(a.useState({}),2),y=j[0],b=j[1],w=x(a.useState(""),2),k=w[0],S=w[1],C=x(a.useState(""),2),I=C[0],_=C[1],E=x(a.useState(""),2),L=E[0],z=E[1],D=x(a.useState(0),2),O=D[0],G=D[1],P=x(a.useState(""),2),A=P[0],T=P[1],Z=x(a.useState(""),2),N=Z[0],F=Z[1],V=x(a.useState(""),2),B=V[0],R=V[1],X=x(a.useState(""),2),q=X[0],M=X[1],H=x(a.useState("none"),2),J=H[0],W=H[1],K=x(a.useState(""),2),Q=K[0],U=K[1],Y=x(a.useState("none"),2),$=Y[0],ee=Y[1],te=x(a.useState(),2),ne=te[0],re=te[1],ae=x(a.useState([]),2),oe=ae[0],se=ae[1],ie=x(a.useState(""),2),le=ie[0],ue=ie[1],ce=x(a.useState(""),2),de=ce[0],fe=ce[1],pe=x(a.useState([]),2),he=pe[0],me=pe[1],xe=x(a.useState([]),2),ge=xe[0],ve=xe[1],je={color:"red"},ye=x(a.useState("password"),2),be=ye[0],we=ye[1],ke=x(a.useState(!0),2),Se=ke[0],Ce=ke[1],Ie=x(a.useState(null),2);Ie[0],Ie[1];a.useEffect((function(){l.Z.get(p.ZW+"/".concat(n),{headers:t}).then(m(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:S(t.data.email),_(t.data.firstname),z(t.data.lastname),G(t.data.hourly_rate),T(t.data.phonenumber),F(t.data.facebook),R(t.data.linkedin),M(t.data.skype),W(t.data.default_language),U(t.data.email_signature),ee(t.data.direction),re(t.data.role),se(t.data.departments),fe(t.data.profile_image);case 14:case"end":return e.stop()}}),e)})))).catch((function(e){var t={department:"",image:"",staff:"",role:"",email:"",password:"",firstname:"",lastname:""};console.log(e.response.data),t.staff=e.response.data.staff,v(t)}))}),[]),a.useEffect((function(){l.Z.get(p._Z+"/1/0",{headers:t}).then((function(e){ve(e.data.all)})).catch((function(e){var t={department:"",image:"",staff:"",role:"",email:"",password:"",firstname:"",lastname:""};!g(e.response.data.department)&&(t.department=e.response.data.department),v(t)}))}),[]),a.useEffect((function(){l.Z.get(p.cl+"/1/0",{headers:t}).then((function(e){me(e.data.all),re(e.data.all[0]._id)})).catch((function(e){var t={department:"",image:"",staff:"",role:"",email:"",password:"",firstname:"",lastname:""};!g(e.response.data.role)&&(t.role=e.response.data.role),v(t)}))}),[]),a.useEffect((function(){we(Se?"password":"text")}),[Se]),a.useEffect((function(){b({email:k,firstname:I,lastname:L,hourly_rate:O,phonenumber:A,facebook:N,linkedin:B,skype:q,default_language:J,email_signature:Q,direction:$,departments:oe,role:ne})}),[k,I,L,O,A,N,B,q,J,Q,$,oe.length,ne]),a.useEffect((function(){b({email:k,firstname:I,lastname:L,hourly_rate:O,phonenumber:A,facebook:N,linkedin:B,skype:q,default_language:J,email_signature:Q,direction:$,departments:oe,password:le,role:ne})}),[le]);var _e=function(){u.A.fire({icon:"success",title:"Success!"})},Ee=function(){u.A.fire({icon:"error",title:"Error exists. Maybe not Image file"})},Le=m(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.Z.put(p.vo+"/".concat(n),y,{headers:t}).then((function(e){_e(),v({department:"",image:"",staff:"",role:"",email:"",password:"",firstname:"",lastname:""})})).catch((function(e){var t={department:"",image:"",staff:"",role:"",email:"",password:"",firstname:"",lastname:""};!g(e.response.data.email)&&(t.email=e.response.data.email),!g(e.response.data.password)&&(t.password=e.response.data.password),!g(e.response.data.firstname)&&(t.firstname=e.response.data.firstname),!g(e.response.data.lastname)&&(t.lastname=e.response.data.lastname),v(t)}));case 2:case"end":return e.stop()}}),e)}))),ze=function(){var e="/uploads/profile_images/"+de;return void 0===de||g(de)?(0,r.jsx)("p",{children:"Profile Image does not exist"}):(0,r.jsx)(f.default,{src:e,width:100,height:100,alt:"Avatar image"})},De=m(i().mark((function e(t){var n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.target.files||!t.target.files[0]){e.next=6;break}return n=t.target.files[0],(r=new FormData).append("file",n),e.next=6,fetch("/api/upload",{method:"POST",body:r}).then((function(e){return e.json()})).then(m(i().mark((function e(t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g(t.error)&&!g(t.filename)){e.next=4;break}Ee(),e.next=12;break;case 4:if(g(de)){e.next=10;break}return(n=new FormData).append("text",de),e.next=9,fetch("/api/upload/remove",{method:"POST",body:n});case 9:e.sent;case 10:fe(t.filename),Oe(t.filename);case 12:case"end":return e.stop()}}),e)}))));case 6:case"end":return e.stop()}}),e)}))),Oe=m(i().mark((function e(r){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===r||""===r){e.next=5;break}return e.next=3,l.Z.put(p.n7+"/".concat(n),{profile_image:r},{headers:t}).then((function(e){_e()})).catch((function(e){console.log(e);var t={department:"",image:"",staff:"",role:"",email:"",password:"",firstname:"",lastname:""};!g(e.response.data.image)&&(t.image=e.response.data.image),v(t)}));case 3:e.next=6;break;case 5:Ee();case 6:case"end":return e.stop()}}),e)})));return(0,r.jsx)(o.X2,{children:(0,r.jsx)(o.JX,{md:"6",children:(0,r.jsxs)(o.kr,{children:[(0,r.jsx)(o.kr.Header,{bordered:!0,children:(0,r.jsxs)(o.kr.Addon,{children:[(0,r.jsx)("h4",{children:I+L}),(0,r.jsx)("p",{style:je,children:h.staff})]})}),(0,r.jsxs)(o.kr.Body,{children:[(0,r.jsx)(ze,{}),(0,r.jsxs)(o.l0.Group,{controlId:"formFile",children:[(0,r.jsx)(o.l0.Label,{}),(0,r.jsx)(o.l0.Control,{type:"file",onChange:function(e){return De(e)}})]}),(0,r.jsxs)(o.l0.Group,{controlId:"emailID",children:[(0,r.jsx)(o.l0.Label,{children:"*Email Address"}),(0,r.jsx)(o.l0.Control,{onChange:function(e){return S(e.target.value)},defaultValue:k,type:"email",size:"lg"}),(0,r.jsx)("p",{style:je,children:h.email})]}),(0,r.jsxs)(o.l0.Group,{controlId:"firstnameID",children:[(0,r.jsx)(o.l0.Label,{children:"*First Name"}),(0,r.jsx)(o.l0.Control,{onChange:function(e){return _(e.target.value)},defaultValue:I,type:"text",size:"lg"}),(0,r.jsx)("p",{style:je,children:h.firstname})]}),(0,r.jsxs)(o.l0.Group,{controlId:"lastnameID",children:[(0,r.jsx)(o.l0.Label,{children:"*Last Name"}),(0,r.jsx)(o.l0.Control,{onChange:function(e){return z(e.target.value)},defaultValue:L,type:"text",size:"lg"}),(0,r.jsx)("p",{style:je,children:h.lastname})]}),(0,r.jsxs)(o.l0.Group,{controlId:"hourlyrateID",children:[(0,r.jsxs)(o.l0.Label,{children:["*Hourly Rate : ",O]}),(0,r.jsx)(o.l0.Control,{onChange:function(e){return G(parseInt(e.target.value))},type:"number",size:"lg"})]}),(0,r.jsxs)(o.l0.Group,{controlId:"phonenumberID",children:[(0,r.jsx)(o.l0.Label,{children:"*Phone Number"}),(0,r.jsx)(o.l0.Control,{onChange:function(e){return T(e.target.value)},defaultValue:A,type:"text",size:"lg"})]}),(0,r.jsxs)(o.l0.Group,{controlId:"facebookID",children:[(0,r.jsx)(o.l0.Label,{children:"*Facebook"}),(0,r.jsx)(o.l0.Control,{onChange:function(e){return F(e.target.value)},defaultValue:N,type:"text",size:"lg"})]}),(0,r.jsxs)(o.l0.Group,{controlId:"linkedinID",children:[(0,r.jsx)(o.l0.Label,{children:"*Linkedin"}),(0,r.jsx)(o.l0.Control,{onChange:function(e){return R(e.target.value)},defaultValue:B,type:"text",size:"lg"})]}),(0,r.jsxs)(o.l0.Group,{controlId:"skypeID",children:[(0,r.jsx)(o.l0.Label,{children:"*Skype"}),(0,r.jsx)(o.l0.Control,{onChange:function(e){return M(e.target.value)},defaultValue:q,type:"text",size:"lg"})]}),(0,r.jsxs)(o.l0.Group,{controlId:"defaultlangID",children:[(0,r.jsx)(o.l0.Label,{children:"*Default Language"}),(0,r.jsxs)(o.l0.Select,{onChange:function(e){return W(e.target.value)},value:J,size:"lg",children:[(0,r.jsx)("option",{value:"none",children:"System Default"}),(0,r.jsx)("option",{value:"English",children:"English"}),(0,r.jsx)("option",{value:"Germany",children:"Germany"})]})]}),(0,r.jsxs)(o.l0.Group,{controlId:"emailsignatureID",children:[(0,r.jsx)(o.l0.Label,{children:"*Email Signature"}),(0,r.jsx)(o.l0.Control,{onChange:function(e){return U(e.target.value)},as:"textarea",rows:3})]}),(0,r.jsxs)(o.l0.Group,{controlId:"directionID",children:[(0,r.jsx)(o.l0.Label,{children:"*Direction"}),(0,r.jsxs)(o.l0.Select,{onChange:function(e){return ee(e.target.value)},value:$,size:"lg",children:[(0,r.jsx)("option",{value:"none",children:"System Default"}),(0,r.jsx)("option",{value:"ltr",children:"LTR"}),(0,r.jsx)("option",{value:"rtl",children:"RTL"})]})]}),(0,r.jsx)(o.l0.Group,{controlId:"memberdepartments",children:ge.map((function(e){return(0,r.jsx)(o.l0.Check,{type:"checkbox",id:e._id,name:e._id,label:e.name,defaultChecked:(t=e._id,oe.indexOf(t)>-1),onChange:function(e){return function(e){var t=oe;t.indexOf(e.target.name)>-1?t.splice(t.indexOf(e.target.name),1):t.push(e.target.name),se(t)}(e)}},e._id);var t}))}),(0,r.jsxs)(o.l0.Group,{controlId:"roleID",children:[(0,r.jsx)(o.l0.Label,{children:"*Role"}),(0,r.jsx)(o.l0.Select,{onChange:function(e){return re(e.target.value)},size:"lg",children:he.map((function(e){return(0,r.jsx)("option",{value:e._id,children:e.name},e._id)}))})]}),(0,r.jsxs)(o.l0.Group,{controlId:"passwordID",children:[(0,r.jsx)(o.l0.Label,{children:"*Password"}),(0,r.jsxs)(o.BZ,{children:[(0,r.jsx)(o.l0.Control,{type:be,onChange:function(e){return ue(e.target.value)},size:"lg"}),(0,r.jsx)(o.zx,{variant:"outline-info",onClick:function(){return Ce(!Se)},size:"lg",icon:!0,children:(0,r.jsx)(d.Z,{})})]}),(0,r.jsx)("p",{style:je,children:h.password})]})]}),(0,r.jsx)(o.kr.Footer,{children:(0,r.jsx)(o.kr.Footer,{bordered:!0,align:"end",children:(0,r.jsx)(o.zx,{onClick:Le,type:"submit",variant:"primary",children:"Submit"})})})]})})})},j=n(11163);function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var s,i=e[Symbol.iterator]();!(r=(s=i.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(l){a=!0,o=l}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var b=function(){var e=(0,j.useRouter)(),t=y(a.useState(),2),n=t[0],s=t[1],i=function(){return void 0!==n?(0,r.jsx)(v,{id:e.query.id}):(0,r.jsx)("p",{})};return a.useEffect((function(){if(void 0!=e.query){var t=e.query.id;s(String(t))}}),[e.query]),(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(o.X2,{children:(0,r.jsx)(o.JX,{md:12,children:(0,r.jsx)(i,{})})})})};b.pageTitle="View Staff",b.activeLink="admin/setting/staff/";var w=b},12590:function(e,t,n){"use strict";var r=n(67294),a=n(45697),o=n.n(a);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function i(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=(0,r.forwardRef)((function(e,t){var n=e.color,a=void 0===n?"currentColor":n,o=e.size,l=void 0===o?24:o,u=i(e,["color","size"]);return r.createElement("svg",s({ref:t,xmlns:"http://www.w3.org/2000/svg",width:l,height:l,viewBox:"0 0 24 24",fill:"none",stroke:a,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},u),r.createElement("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),r.createElement("circle",{cx:"12",cy:"12",r:"3"}))}));l.propTypes={color:o().string,size:o().oneOfType([o().string,o().number])},l.displayName="Eye",t.Z=l}},function(e){e.O(0,[1039,9774,2888,179],(function(){return t=87873,e(e.s=t);var t}));var t=e.O();_N_E=t}]);