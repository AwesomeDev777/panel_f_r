(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[137],{26553:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/setting/role/[id]",function(){return n(8300)}])},16862:function(e,t,n){"use strict";n.d(t,{M:function(){return c},A:function(){return s}});var r=n(78764),i=n.n(r),a=n(77630),o=n.n(a),c=o()(i().mixin({customClass:{confirmButton:"btn btn-label-success btn-wide mx-1",cancelButton:"btn btn-label-danger btn-wide mx-1"},buttonsStyling:!1})),s=o()(i().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0}))},8300:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var r=n(85893),i=n(67294),a=n(59417),o=n(35666),c=n.n(o),s=n(6154),u=n(16862),d=n(62286),l=n(28367);function f(e,t,n,r,i,a,o){try{var c=e[a](o),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,i)}function h(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){f(a,r,i,o,c,"next",e)}function c(e){f(a,r,i,o,c,"throw",e)}o(void 0)}))}}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,c=e[Symbol.iterator]();!(r=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(s){i=!0,a=s}finally{try{r||null==c.return||c.return()}finally{if(i)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}n(44364);var x=function(e){var t={Authorization:(0,d.parseCookies)().admintoken},n=e.id,o=m(i.useState(""),2),f=o[0],x=o[1],v=m(i.useState(""),2),j=v[0],b=v[1],p=m(i.useState(""),2),y=p[0],w=p[1],k=m(i.useState([{View_Own:!1},{View_Global:!1},{Create:!1},{Edit:!1},{Delete:!1}]),2),g=k[0],S=k[1],_=m(i.useState([{View_Global:!1},{Create:!1},{Edit:!1},{Delete:!1}]),2),O=_[0],E=_[1],C=m(i.useState([]),2),A=C[0],N=C[1],B=m(i.useState(.1),2),X=B[0],P=B[1],T=m(i.useState(.1),2),q=T[0],F=T[1];i.useEffect((function(){s.Z.get(l.gu+"/".concat(n),{headers:t}).then(h(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:w(t.data.name),n=Object.entries(JSON.parse(t.data.permissions)),N(n),S(Object(n[0][1])),E(Object(n[1][1]));case 5:case"end":return e.stop()}}),e)})))).catch((function(e){console.log(e.response.data.role)}))}),[]),i.useEffect((function(){b(JSON.stringify({contract:g,staff:O}))}),[X,q]);var J=h(c().mark((function e(){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={name:y,permissions:j},e.next=3,s.Z.put(l._Q+"/".concat(n),r,{headers:t}).then((function(e){u.A.fire({icon:"success",title:"Success!"}),x("")})).catch((function(e){x(e.response.data.role)}));case 3:case"end":return e.stop()}}),e)})));return(0,r.jsx)(a.X2,{children:(0,r.jsx)(a.JX,{md:"6",children:(0,r.jsxs)(a.kr,{children:[(0,r.jsx)(a.kr.Header,{bordered:!0,children:(0,r.jsxs)(a.kr.Addon,{children:[(0,r.jsx)("h4",{children:y}),(0,r.jsx)("p",{style:{color:"red"},children:f})]})}),(0,r.jsxs)(a.kr.Body,{children:[(0,r.jsx)("p",{}),(0,r.jsxs)(a.iA,{bordered:!0,children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"Feature"}),(0,r.jsx)("th",{children:"Capabilities"})]})}),(0,r.jsx)("tbody",{children:A.map((function(e){return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:e[0]}),(0,r.jsx)("td",{children:e[1].map((function(t){return(0,r.jsx)(a.l0.Check,{type:"checkbox",id:e[0]+Object.keys(t),checked:Boolean(Object.values(t)[0]),name:String(Object.keys(t)),onChange:function(t){return function(e,t){switch(t){case"contract":for(var n=g,r=0;r<n.length;r++)Object.keys(n[r])==e.target.name&&(n[r][e.target.name]=!n[r][e.target.name]);S(n),P(Math.random());break;case"staff":for(var i=O,a=0;a<i.length;a++)Object.keys(i[a])==e.target.name&&(i[a][e.target.name]=!i[a][e.target.name]);E(i),F(Math.random())}}(t,e[0])},label:Object.keys(t)},e[0]+Object.keys(t))}))})]},e[0])}))})]})]}),(0,r.jsx)(a.kr.Footer,{children:(0,r.jsx)(a.kr.Footer,{bordered:!0,align:"end",children:(0,r.jsx)(a.zx,{onClick:J,type:"submit",variant:"primary",children:"Submit"})})})]})})})},v=n(11163);function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,c=e[Symbol.iterator]();!(r=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(s){i=!0,a=s}finally{try{r||null==c.return||c.return()}finally{if(i)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var b=function(){var e=(0,v.useRouter)(),t=j(i.useState(),2),n=t[0],o=t[1],c=function(){return void 0!==n?(0,r.jsx)(x,{id:e.query.id}):(0,r.jsx)("p",{})};return i.useEffect((function(){if(void 0!=e.query){var t=e.query.id;o(String(t))}}),[e.query]),(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(a.X2,{children:(0,r.jsx)(a.JX,{md:12,children:(0,r.jsx)(c,{})})})})};b.pageTitle="View Role",b.activeLink="admin/setting/role/";var p=b}},function(e){e.O(0,[1039,9774,2888,179],(function(){return t=26553,e(e.s=t);var t}));var t=e.O();_N_E=t}]);