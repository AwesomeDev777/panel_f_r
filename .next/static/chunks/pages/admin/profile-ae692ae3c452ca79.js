(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8172],{8334:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/profile",function(){return t(86559)}])},16862:function(e,n,t){"use strict";t.d(n,{M:function(){return l},A:function(){return i}});var r=t(78764),a=t.n(r),s=t(77630),o=t.n(s),l=o()(a().mixin({customClass:{confirmButton:"btn btn-label-success btn-wide mx-1",cancelButton:"btn btn-label-danger btn-wide mx-1"},buttonsStyling:!1})),i=o()(a().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0}))},86559:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return y}});var r=t(85893),a=t(67294),s=t(59417),o=t(35666),l=t.n(o),i=t(6154),d=t(16862),u=t(62286),c=t(25675),f=t(28367);function p(e,n,t,r,a,s,o){try{var l=e[s](o),i=l.value}catch(d){return void t(d)}l.done?n(i):Promise.resolve(i).then(r,a)}function m(e){return function(){var n=this,t=arguments;return new Promise((function(r,a){var s=e.apply(n,t);function o(e){p(s,r,a,o,l,"next",e)}function l(e){p(s,r,a,o,l,"throw",e)}o(void 0)}))}}function h(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=[],r=!0,a=!1,s=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(t.push(o.value),!n||t.length!==n);r=!0);}catch(i){a=!0,s=i}finally{try{r||null==l.return||l.return()}finally{if(a)throw s}}return t}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var x=t(44364),w=function(e){var n={Authorization:(0,u.parseCookies)().admintoken},t=e.id,o=h(a.useState({staff:"",image:"",department:"",email:"",firstname:"",lastname:"",oldpassword:"",confirmpassword:"",newpassword:""}),2),p=o[0],w=o[1],j=h(a.useState({}),2),g=j[0],v=j[1],y=h(a.useState({}),2),b=y[0],k=y[1],C=h(a.useState(""),2),S=C[0],I=C[1],_=h(a.useState(""),2),L=_[0],D=_[1],G=h(a.useState(""),2),E=G[0],z=G[1],P=h(a.useState(0),2),A=P[0],F=P[1],Z=h(a.useState(""),2),B=Z[0],N=Z[1],T=h(a.useState(""),2),V=T[0],X=T[1],O=h(a.useState(""),2),q=O[0],R=O[1],H=h(a.useState(""),2),J=H[0],M=H[1],Q=h(a.useState("none"),2),W=Q[0],K=Q[1],U=h(a.useState(""),2),Y=U[0],$=U[1],ee=h(a.useState("none"),2),ne=ee[0],te=ee[1],re=h(a.useState([]),2),ae=re[0],se=re[1],oe=h(a.useState(""),2),le=oe[0],ie=oe[1],de=h(a.useState([]),2),ue=de[0],ce=de[1],fe=h(a.useState(""),2),pe=fe[0],me=fe[1],he=h(a.useState(""),2),xe=he[0],we=he[1],je=h(a.useState(""),2),ge=je[0],ve=je[1],ye={color:"red"},be=h(a.useState(null),2);be[0],be[1];a.useEffect((function(){i.Z.get(f.ZW+"/".concat(t),{headers:n}).then((function(e){I(e.data.email),D(e.data.firstname),z(e.data.lastname),F(e.data.hourly_rate),N(e.data.phonenumber),X(e.data.facebook),R(e.data.linkedin),M(e.data.skype),K(e.data.default_language),$(e.data.email_signature),te(e.data.direction),se(e.data.departments),ie(e.data.profile_image)})).catch((function(e){var n={staff:"",image:"",department:"",email:"",firstname:"",lastname:"",oldpassword:"",confirmpassword:"",newpassword:""};n.staff=e.response.data.staff,w(n)}))}),[]),a.useEffect((function(){i.Z.get(f._Z+"/1/0",{headers:n}).then((function(e){ce(e.data.all)})).catch((function(e){var n={staff:"",image:"",department:"",email:"",firstname:"",lastname:"",oldpassword:"",confirmpassword:"",newpassword:""};!x(e.response.data.department)&&(n.department=e.response.data.department),w(n)}))}),[]),a.useEffect((function(){v({email:S,firstname:L,lastname:E,hourly_rate:A,phonenumber:B,facebook:V,linkedin:q,skype:J,default_language:W,email_signature:Y,direction:ne,departments:ae})}),[S,L,E,A,B,V,q,J,W,Y,ne,ae.length]),a.useEffect((function(){k({oldpassword:pe,confirmpassword:ge,newpassword:xe})}),[pe,ge,xe]);var ke=function(){d.A.fire({icon:"success",title:"Success!"})},Ce=function(){d.A.fire({icon:"error",title:"Error exists. Maybe not Image file"})},Se=m(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.Z.put(f.vo+"/".concat(t),g,{headers:n}).then((function(e){ke(),w({staff:"",image:"",department:"",email:"",firstname:"",lastname:"",oldpassword:"",confirmpassword:"",newpassword:""})})).catch((function(e){var n={staff:"",image:"",department:"",email:"",firstname:"",lastname:"",oldpassword:"",confirmpassword:"",newpassword:""};!x(e.response.data.email)&&(n.email=e.response.data.email),!x(e.response.data.firstname)&&(n.firstname=e.response.data.firstname),!x(e.response.data.lastname)&&(n.lastname=e.response.data.lastname),w(n)}));case 2:case"end":return e.stop()}}),e)}))),Ie=m(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.Z.put(f.Qc+"/".concat(t),b,{headers:n}).then((function(e){ke(),w({staff:"",image:"",department:"",email:"",firstname:"",lastname:"",oldpassword:"",confirmpassword:"",newpassword:""})})).catch((function(e){var n={staff:"",image:"",department:"",email:"",firstname:"",lastname:"",oldpassword:"",confirmpassword:"",newpassword:""};console.log(e.response.data),!x(e.response.data.oldpassword)&&(n.oldpassword=e.response.data.oldpassword),!x(e.response.data.confirmpassword)&&(n.confirmpassword=e.response.data.confirmpassword),!x(e.response.data.newpassword)&&(n.newpassword=e.response.data.newpassword),w(n)}));case 2:case"end":return e.stop()}}),e)}))),_e=function(){var e="/uploads/profile_images/"+le;return void 0===le||x(le)?(0,r.jsx)("p",{children:"Profile Image does not exsist"}):(0,r.jsx)(c.default,{src:e,width:100,height:100,alt:"Avatar image"})},Le=m(l().mark((function e(n){var t,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.target.files||!n.target.files[0]){e.next=6;break}return t=n.target.files[0],(r=new FormData).append("file",t),e.next=6,fetch("/api/upload",{method:"POST",body:r}).then((function(e){return e.json()})).then(m(l().mark((function e(n){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(x(n.error)&&!x(n.filename)){e.next=4;break}Ce(),e.next=12;break;case 4:if(x(le)){e.next=10;break}return(t=new FormData).append("text",le),e.next=9,fetch("/api/upload/remove",{method:"POST",body:t});case 9:e.sent;case 10:ie(n.filename),De(n.filename);case 12:case"end":return e.stop()}}),e)}))));case 6:case"end":return e.stop()}}),e)}))),De=m(l().mark((function e(r){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===r||""===r){e.next=5;break}return e.next=3,i.Z.put(f.n7+"/".concat(t),{profile_image:r},{headers:n}).then((function(e){ke()})).catch((function(e){console.log(e);var n={staff:"",image:"",department:"",email:"",firstname:"",lastname:"",oldpassword:"",confirmpassword:"",newpassword:""};!x(e.response.data.image)&&(n.image=e.response.data.image),w(n)}));case 3:e.next=6;break;case 5:Ce();case 6:case"end":return e.stop()}}),e)})));return(0,r.jsxs)(s.X2,{children:[(0,r.jsx)(s.JX,{md:"6",children:(0,r.jsxs)(s.kr,{children:[(0,r.jsx)(s.kr.Header,{bordered:!0,children:(0,r.jsxs)(s.kr.Addon,{children:[(0,r.jsx)("h4",{children:L+" "+E}),(0,r.jsx)("p",{style:ye,children:p.staff})]})}),(0,r.jsxs)(s.kr.Body,{children:[(0,r.jsx)(_e,{}),(0,r.jsxs)(s.l0.Group,{controlId:"formFile",children:[(0,r.jsx)(s.l0.Label,{}),(0,r.jsx)(s.l0.Control,{type:"file",onChange:function(e){return Le(e)}})]}),(0,r.jsxs)(s.l0.Group,{controlId:"emailID",children:[(0,r.jsx)(s.l0.Label,{children:"*Email Address"}),(0,r.jsx)(s.l0.Control,{onChange:function(e){return I(e.target.value)},defaultValue:S,type:"email",size:"lg"}),(0,r.jsx)("p",{style:ye,children:p.email})]}),(0,r.jsxs)(s.l0.Group,{controlId:"firstnameID",children:[(0,r.jsx)(s.l0.Label,{children:"*First Name"}),(0,r.jsx)(s.l0.Control,{onChange:function(e){return D(e.target.value)},defaultValue:L,type:"text",size:"lg"}),(0,r.jsx)("p",{style:ye,children:p.firstname})]}),(0,r.jsxs)(s.l0.Group,{controlId:"lastnameID",children:[(0,r.jsx)(s.l0.Label,{children:"*Last Name"}),(0,r.jsx)(s.l0.Control,{onChange:function(e){return z(e.target.value)},defaultValue:E,type:"text",size:"lg"}),(0,r.jsx)("p",{style:ye,children:p.lastname})]}),(0,r.jsxs)(s.l0.Group,{controlId:"hourlyrateID",children:[(0,r.jsx)(s.l0.Label,{children:"*Hourly Rate"}),(0,r.jsx)(s.l0.Control,{onChange:function(e){return F(parseInt(e.target.value))},defaultValue:A,type:"number",size:"lg"})]}),(0,r.jsxs)(s.l0.Group,{controlId:"phonenumberID",children:[(0,r.jsx)(s.l0.Label,{children:"*Phone Number"}),(0,r.jsx)(s.l0.Control,{onChange:function(e){return N(e.target.value)},defaultValue:B,type:"text",size:"lg"})]}),(0,r.jsxs)(s.l0.Group,{controlId:"facebookID",children:[(0,r.jsx)(s.l0.Label,{children:"*Facebook"}),(0,r.jsx)(s.l0.Control,{onChange:function(e){return X(e.target.value)},defaultValue:V,type:"text",size:"lg"})]}),(0,r.jsxs)(s.l0.Group,{controlId:"linkedinID",children:[(0,r.jsx)(s.l0.Label,{children:"*Linkedin"}),(0,r.jsx)(s.l0.Control,{onChange:function(e){return R(e.target.value)},defaultValue:q,type:"text",size:"lg"})]}),(0,r.jsxs)(s.l0.Group,{controlId:"skypeID",children:[(0,r.jsx)(s.l0.Label,{children:"*Skype"}),(0,r.jsx)(s.l0.Control,{onChange:function(e){return M(e.target.value)},defaultValue:J,type:"text",size:"lg"})]}),(0,r.jsxs)(s.l0.Group,{controlId:"defaultlangID",children:[(0,r.jsx)(s.l0.Label,{children:"*Default Language"}),(0,r.jsxs)(s.l0.Select,{onChange:function(e){return K(e.target.value)},value:W,size:"lg",children:[(0,r.jsx)("option",{value:"none",children:"System Default"}),(0,r.jsx)("option",{value:"English",children:"English"}),(0,r.jsx)("option",{value:"Germany",children:"Germany"})]})]}),(0,r.jsxs)(s.l0.Group,{controlId:"emailsignatureID",children:[(0,r.jsx)(s.l0.Label,{children:"*Email Signature"}),(0,r.jsx)(s.l0.Control,{onChange:function(e){return $(e.target.value)},as:"textarea",rows:3})]}),(0,r.jsxs)(s.l0.Group,{controlId:"directionID",children:[(0,r.jsx)(s.l0.Label,{children:"*Direction"}),(0,r.jsxs)(s.l0.Select,{onChange:function(e){return te(e.target.value)},value:ne,size:"lg",children:[(0,r.jsx)("option",{value:"none",children:"System Default"}),(0,r.jsx)("option",{value:"ltr",children:"LTR"}),(0,r.jsx)("option",{value:"rtl",children:"RTL"})]})]}),(0,r.jsx)("p",{}),(0,r.jsx)(s.l0.Group,{controlId:"memberdepartments",children:ue.map((function(e){return(0,r.jsx)(s.l0.Check,{type:"checkbox",id:e._id,name:e._id,label:e.name,defaultChecked:(n=e._id,ae.indexOf(n)>-1),disabled:!0},e._id);var n}))}),(0,r.jsx)("p",{})]}),(0,r.jsx)(s.kr.Footer,{children:(0,r.jsx)(s.kr.Footer,{bordered:!0,align:"end",children:(0,r.jsx)(s.zx,{onClick:Se,type:"submit",variant:"primary",children:"Submit"})})})]})}),(0,r.jsx)(s.JX,{md:"6",children:(0,r.jsxs)(s.kr,{children:[(0,r.jsx)(s.kr.Header,{bordered:!0,children:(0,r.jsx)(s.kr.Addon,{children:(0,r.jsx)("h4",{children:"Change your password"})})}),(0,r.jsxs)(s.kr.Body,{children:[(0,r.jsxs)(s.l0.Group,{controlId:"oldpasswordID",children:[(0,r.jsx)(s.l0.Label,{children:"*Old Password"}),(0,r.jsx)(s.BZ,{children:(0,r.jsx)(s.l0.Control,{type:"password",onChange:function(e){return me(e.target.value)},size:"lg"})}),(0,r.jsx)("p",{style:ye,children:p.oldpassword})]}),(0,r.jsxs)(s.l0.Group,{controlId:"newpasswordID",children:[(0,r.jsx)(s.l0.Label,{children:"*New Password"}),(0,r.jsx)(s.BZ,{children:(0,r.jsx)(s.l0.Control,{type:"password",onChange:function(e){return we(e.target.value)},size:"lg"})}),(0,r.jsx)("p",{style:ye,children:p.newpassword})]}),(0,r.jsxs)(s.l0.Group,{controlId:"confirmpasswordID",children:[(0,r.jsx)(s.l0.Label,{children:"*Confirm Password"}),(0,r.jsx)(s.BZ,{children:(0,r.jsx)(s.l0.Control,{type:"password",onChange:function(e){return ve(e.target.value)},size:"lg"})}),(0,r.jsx)("p",{style:ye,children:p.confirmpassword})]})]}),(0,r.jsx)(s.kr.Footer,{children:(0,r.jsx)(s.kr.Footer,{bordered:!0,align:"end",children:(0,r.jsx)(s.zx,{onClick:Ie,type:"submit",variant:"primary",children:"Submit"})})})]})})]})},j=t(11163);function g(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=[],r=!0,a=!1,s=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(t.push(o.value),!n||t.length!==n);r=!0);}catch(i){a=!0,s=i}finally{try{r||null==l.return||l.return()}finally{if(a)throw s}}return t}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var v=function(){var e=(0,j.useRouter)(),n=g(a.useState(),2),t=n[0],o=n[1],l=function(){return void 0!==t?(0,r.jsx)(w,{id:e.query.id}):(0,r.jsx)("p",{})};return a.useEffect((function(){if(void 0!=e.query){var n=e.query.id;o(String(n))}}),[e.query]),(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(s.X2,{children:(0,r.jsx)(s.JX,{md:12,children:(0,r.jsx)(l,{})})})})};v.pageTitle="Profile",v.activeLink="admin/profile/";var y=v}},function(e){e.O(0,[1039,9774,2888,179],(function(){return n=8334,e(e.s=n);var n}));var n=e.O();_N_E=n}]);